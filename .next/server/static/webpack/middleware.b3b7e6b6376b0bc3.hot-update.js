"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"config\": () => (/* binding */ config),\n/* harmony export */   \"middleware\": () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(middleware)/./node_modules/next/dist/server/web/exports/next-response.js\");\n\nfunction middleware(req) {\n    // Get custom auth token from Authorization header or cookies\n    const authHeader = req.headers.get(\"authorization\");\n    const tokenFromHeader = authHeader?.startsWith(\"Bearer \") ? authHeader.split(\" \")[1] : null;\n    const tokenFromCookie = req.cookies.get(\"token\")?.value;\n    const token = tokenFromHeader || tokenFromCookie;\n    const isAuth = !!token;\n    const isAuthPage = req.nextUrl.pathname.startsWith(\"/login\") || req.nextUrl.pathname.startsWith(\"/register\");\n    if (isAuthPage) {\n        if (isAuth) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/dashboard\", req.url));\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n    }\n    // For protected routes, temporarily allow access for development\n    // In production, you should validate the JWT token here\n    if (!isAuth && req.nextUrl.pathname.startsWith(\"/dashboard\")) {\n        let to = encodeURIComponent(req.nextUrl.pathname);\n        if (req.nextUrl.search) {\n            to = encodeURIComponent(req.nextUrl.pathname + req.nextUrl.search);\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(`/login?to=${to}`, req.url));\n    }\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n}\nconst config = {\n    matcher: [\n        \"/dashboard/:path*\",\n        \"/editor/:path*\",\n        \"/login\",\n        \"/register\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUQ7QUFFaEQsU0FBU0MsV0FBV0MsR0FBZ0IsRUFBRTtJQUMzQyw2REFBNkQ7SUFDN0QsTUFBTUMsYUFBYUQsSUFBSUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7SUFDbkMsTUFBTUMsa0JBQWtCSCxZQUFZSSxXQUFXLGFBQWFKLFdBQVdLLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUk7SUFDM0YsTUFBTUMsa0JBQWtCUCxJQUFJUSxPQUFPLENBQUNMLEdBQUcsQ0FBQyxVQUFVTTtJQUVsRCxNQUFNQyxRQUFRTixtQkFBbUJHO0lBQ2pDLE1BQU1JLFNBQVMsQ0FBQyxDQUFDRDtJQUVqQixNQUFNRSxhQUNKWixJQUFJYSxPQUFPLENBQUNDLFFBQVEsQ0FBQ1QsVUFBVSxDQUFDLGFBQ2hDTCxJQUFJYSxPQUFPLENBQUNDLFFBQVEsQ0FBQ1QsVUFBVSxDQUFDO0lBRWxDLElBQUlPLFlBQVk7UUFDZCxJQUFJRCxRQUFRO1lBQ1YsT0FBT2IsMkZBQXFCLENBQUMsSUFBSWtCLElBQUksY0FBY2hCLElBQUlpQixHQUFHO1FBQzVELENBQUM7UUFDRCxPQUFPbkIsdUZBQWlCO0lBQzFCLENBQUM7SUFFRCxpRUFBaUU7SUFDakUsd0RBQXdEO0lBQ3hELElBQUksQ0FBQ2EsVUFBVVgsSUFBSWEsT0FBTyxDQUFDQyxRQUFRLENBQUNULFVBQVUsQ0FBQyxlQUFlO1FBQzVELElBQUljLEtBQUtDLG1CQUFtQnBCLElBQUlhLE9BQU8sQ0FBQ0MsUUFBUTtRQUNoRCxJQUFJZCxJQUFJYSxPQUFPLENBQUNRLE1BQU0sRUFBRTtZQUN0QkYsS0FBS0MsbUJBQW1CcEIsSUFBSWEsT0FBTyxDQUFDQyxRQUFRLEdBQUdkLElBQUlhLE9BQU8sQ0FBQ1EsTUFBTTtRQUNuRSxDQUFDO1FBRUQsT0FBT3ZCLDJGQUFxQixDQUMxQixJQUFJa0IsSUFBSSxDQUFDLFVBQVUsRUFBRUcsR0FBRyxDQUFDLEVBQUVuQixJQUFJaUIsR0FBRztJQUV0QyxDQUFDO0lBRUQsT0FBT25CLHVGQUFpQjtBQUMxQixDQUFDO0FBRU0sTUFBTXdCLFNBQVM7SUFDcEJDLFNBQVM7UUFBQztRQUFxQjtRQUFrQjtRQUFVO0tBQVk7QUFDekUsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9taWRkbGV3YXJlLnRzPzQyMmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5cbmV4cG9ydCBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgLy8gR2V0IGN1c3RvbSBhdXRoIHRva2VuIGZyb20gQXV0aG9yaXphdGlvbiBoZWFkZXIgb3IgY29va2llc1xuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJylcbiAgY29uc3QgdG9rZW5Gcm9tSGVhZGVyID0gYXV0aEhlYWRlcj8uc3RhcnRzV2l0aCgnQmVhcmVyICcpID8gYXV0aEhlYWRlci5zcGxpdCgnICcpWzFdIDogbnVsbFxuICBjb25zdCB0b2tlbkZyb21Db29raWUgPSByZXEuY29va2llcy5nZXQoJ3Rva2VuJyk/LnZhbHVlXG5cbiAgY29uc3QgdG9rZW4gPSB0b2tlbkZyb21IZWFkZXIgfHwgdG9rZW5Gcm9tQ29va2llXG4gIGNvbnN0IGlzQXV0aCA9ICEhdG9rZW5cbiAgXG4gIGNvbnN0IGlzQXV0aFBhZ2UgPVxuICAgIHJlcS5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvbG9naW5cIikgfHxcbiAgICByZXEubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKFwiL3JlZ2lzdGVyXCIpXG5cbiAgaWYgKGlzQXV0aFBhZ2UpIHtcbiAgICBpZiAoaXNBdXRoKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvZGFzaGJvYXJkXCIsIHJlcS51cmwpKVxuICAgIH1cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKVxuICB9XG5cbiAgLy8gRm9yIHByb3RlY3RlZCByb3V0ZXMsIHRlbXBvcmFyaWx5IGFsbG93IGFjY2VzcyBmb3IgZGV2ZWxvcG1lbnRcbiAgLy8gSW4gcHJvZHVjdGlvbiwgeW91IHNob3VsZCB2YWxpZGF0ZSB0aGUgSldUIHRva2VuIGhlcmVcbiAgaWYgKCFpc0F1dGggJiYgcmVxLm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aChcIi9kYXNoYm9hcmRcIikpIHtcbiAgICBsZXQgdG8gPSBlbmNvZGVVUklDb21wb25lbnQocmVxLm5leHRVcmwucGF0aG5hbWUpXG4gICAgaWYgKHJlcS5uZXh0VXJsLnNlYXJjaCkge1xuICAgICAgdG8gPSBlbmNvZGVVUklDb21wb25lbnQocmVxLm5leHRVcmwucGF0aG5hbWUgKyByZXEubmV4dFVybC5zZWFyY2gpXG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChcbiAgICAgIG5ldyBVUkwoYC9sb2dpbj90bz0ke3RvfWAsIHJlcS51cmwpXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcbn1cblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgbWF0Y2hlcjogW1wiL2Rhc2hib2FyZC86cGF0aCpcIiwgXCIvZWRpdG9yLzpwYXRoKlwiLCBcIi9sb2dpblwiLCBcIi9yZWdpc3RlclwiXSxcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJtaWRkbGV3YXJlIiwicmVxIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJ0b2tlbkZyb21IZWFkZXIiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJ0b2tlbkZyb21Db29raWUiLCJjb29raWVzIiwidmFsdWUiLCJ0b2tlbiIsImlzQXV0aCIsImlzQXV0aFBhZ2UiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJyZWRpcmVjdCIsIlVSTCIsInVybCIsIm5leHQiLCJ0byIsImVuY29kZVVSSUNvbXBvbmVudCIsInNlYXJjaCIsImNvbmZpZyIsIm1hdGNoZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});